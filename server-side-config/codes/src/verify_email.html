<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Email Verification</title>

  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
</head>
<body>
    <script>
        // Extract verification token and user ID from URL
        const urlParams = new URLSearchParams(window.location.search);
        const verificationToken = urlParams.get('token');
        const userId = urlParams.get('userId');
    
        // Send verification token and user ID to backend
        fetch(`http://localhost:3000/api/v1/https/verify/verify-email?token=${verificationToken}&userId=${userId}`)
            .then(response => {
                if (response.ok) {
                    // Call function to show success message
                    showVerificationAlert();
                } else {
                    // Handle error (e.g., show error message)
                    alert('Failed to verify email.');
                }
            })
            .catch(error => {
                console.error('Error verifying email:', error);
                // Handle error (e.g., show error message)
                alert('An error occurred while verifying email.');
            });
    
        function showVerificationAlert() {
            Swal.fire({
                title: 'Email Verified!',
                text: 'Your email has been successfully verified.',
                icon: 'success',
                confirmButtonText: 'Continue'
            }).then((result) => {
                if (result.isConfirmed) {
                    window.location.href = `http://localhost:3000/api/v1/https/password/login.html`;
                }
            });
        }
    </script>
    
</body>
</html>
